<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>tox-js</title>
</head>
<body>
	<script>
	//
	// -----------------------------------------------
	// out new element and its methods
	class Tox extends HTMLElement
		{
		constructor()
			{
			super();
			fetch('http://localhost:8080/tox/example.test.formatted?in_mask=YYYYMMDD')
				.then((response)=>
					{
					console.log("status: "+response.status);
					return response.text();
					})
				.then((text)=>
					{
					console.log("text: "+text);
					try
						{
						var dp = new DOMParser();
						var xmlDOM = dp.parseFromString(text, "text/xml");
						this.appendChild(xmlDOM.documentElement);
						}
					catch(err)
						{
						console.log("err: "+err.message);
						}
					});
			}
		}
	//
	// -----------------------------------------------
	// register our element with the DOM
	customElements.define('tox-js',Tox);
	//
	// -----------------------------------------------
	// create an instance and add it to the body
	document.body.appendChild(new Tox());
	//
	// -----------------------------------------------
	// instantiate an xpath tool
	var xpe = new XPathEvaluator();
	//
	// -----------------------------------------------
	// use xpath to pluck a string value from the DOM
	var txt = xpe.evaluate("//tox-js/example/@timestamp",document,null,XPathResult.STRING_TYPE,null);
	//
	// -----------------------------------------------
	// show what we found
	console.log("//tox-js/example/@timestamp = "+txt.stringValue);
	//
	// -----------------------------------------------
	//
	</script>
</body>
</html>